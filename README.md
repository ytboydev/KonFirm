# نظام إدارة الطلبات مع تكوين الأعمدة الديناميكي

## الميزات الجديدة

### 1. تكوين الأعمدة الديناميكي
- إضافة، تحرير، وحذف الأعمدة
- تحديد نوع البيانات لكل عمود (نص، رقم، تاريخ، قائمة منسدلة، إلخ)
- تحديد الخصائص: مرئي، قابل للتحرير، مطلوب، قابل للبحث
- إعادة ترتيب الأعمدة
- تصدير واستيراد التكوين

### 2. أنواع البيانات المدعومة
- **نص** - حقل نص عادي
- **بريد إلكتروني** - حقل بريد إلكتروني مع تحقق
- **هاتف** - حقل رقم هاتف
- **رقم** - حقل رقمي
- **تاريخ** - حقل تاريخ
- **تاريخ ووقت** - حقل تاريخ ووقت
- **قائمة منسدلة** - قائمة خيارات محددة
- **نص طويل** - حقل نص متعدد الأسطر
- **مربع اختيار** - حقل تحديد (نعم/لا)
- **اختيار واحد** - مجموعة خيارات راديو

### 3. خصائص الأعمدة
- **مرئي**: هل يظهر العمود في الجدول
- **قابل للتحرير**: هل يمكن تحرير العمود
- **مطلوب**: هل العمود مطلوب عند إدخال البيانات
- **قابل للترتيب**: هل يمكن ترتيب البيانات حسب هذا العمود
- **قابل للبحث**: هل يمكن البحث في هذا العمود
- **العرض**: عرض العمود بالبكسل

## كيفية الاستخدام

### 1. الوصول إلى إدارة الأعمدة
- قم بتسجيل الدخول كمدير
- اختر "إدارة الأعمدة" من القائمة الجانبية
- اضغط على "فتح إدارة الأعمدة"

### 2. إضافة عمود جديد
- اضغط على "إضافة عمود"
- أدخل الاسم العربي والإنجليزي
- اختر نوع البيانات
- حدد الخصائص المطلوبة
- أضف الخيارات إذا كان النوع قائمة منسدلة أو اختيار واحد

### 3. تحرير عمود موجود
- اضغط على أيقونة التحرير بجانب العمود
- عدل المعلومات المطلوبة
- احفظ التغييرات

### 4. حذف عمود
- اضغط على أيقونة الحذف
- أكد الحذف

### 5. إعادة ترتيب الأعمدة
- استخدم الأسهم لنقل العمود لأعلى أو لأسفل

### 6. تصدير/استيراد التكوين
- **تصدير**: للحصول على نسخة احتياطية من التكوين
- **استيراد**: لتطبيق تكوين محفوظ مسبقاً

## ملاحظات مهمة

### 1. Google Sheets Integration
- يتم حفظ تكوين الأعمدة في ورقة منفصلة تسمى "ColumnsConfig"
- يتم تحديث رؤوس الأعمدة في ورقة الطلبات تلقائياً
- البيانات متوافقة مع الأعمدة الموجودة مسبقاً

### 2. التخزين المحلي
- يتم حفظ التكوين في متصفح المستخدم كنسخة احتياطية
- يتم مزامنة التكوين مع Google Sheets عند الحفظ

### 3. الأمان
- فقط المدير يمكنه تعديل تكوين الأعمدة
- جميع العمليات يتم تسجيلها في سجل النشاط

## الأعمدة الافتراضية

```javascript
const columns = [
    'الرقم التسلسلي',
    'التاريخ',
    'إسم العميل',
    'رقم الموبايل للتواصل',
    'رقم اخر للتواصل',
    'المحافظة',
    'المنطقة',
    'العنوان',
    'سعر القطعه',
    'عدد القطع',
    'المجموع',
    'اسم المنتج',
    'المصدر',
    'التغذية الراجعة',
    'الملاحظات',
    'اتصال',
    'واتساب'
];
```

## التكوين المتقدم

### تخصيص الخيارات للقوائم المنسدلة

```javascript
// مثال لتكوين قائمة المحافظات
const governorateOptions = [
    'بغداد', 'البصرة', 'نينوى', 'أربيل', 'النجف', 'كربلاء',
    'الأنبار', 'دهوك', 'كركوك', 'بابل', 'الديوانية', 'ذي قار',
    'المثنى', 'واسط', 'صلاح الدين', 'السليمانية', 'ميسان', 'دياله'
];

// مثال لتكوين قائمة المصادر
const sourceOptions = [
    'فيسبوك', 'واتساب', 'انستغرام', 'تيك توك', 
    'موقع إلكتروني', 'مكالمة مباشرة', 'أخرى'
];
```

### تخصيص التحقق من البيانات

يمكن إضافة تحقق مخصص للبيانات في المستقبل:

```javascript
// مثال لتحقق مخصص من رقم الهاتف العراقي
function validateIraqiPhone(phone) {
    const iraqiPhonePattern = /^(07)[0-9]{8}$/;
    return iraqiPhonePattern.test(phone);
}
```

## استكشاف الأخطاء

### 1. لا تظهر الأعمدة الجديدة
- تأكد من أن العمود مرئي
- تحقق من ترتيب الأعمدة
- أعد تحميل الصفحة

### 2. لا يمكن حفظ التكوين
- تأكد من أنك مسجل دخول كمدير
- تحقق من اتصال الإنترنت
- راجع سجل الأخطاء في وحدة التحكم

### 3. مشاكل في النماذج
- تأكد من أن الحقول المطلوبة معبأة
- تحقق من صحة البيانات المدخلة
- راجع نوع البيانات المحدد للعمود

## التطوير المستقبلي

### الميزات المخططة
- تحقق مخصص من البيانات
- قوالب تكوين جاهزة
- تصدير البيانات حسب التكوين المخصص
- إحصائيات متقدمة حسب الأعمدة
- واجهة سحب وإفلات لإعادة الترتيب

### التحسينات المقترحة
- دعم الأعمدة المحسوبة
- تجميع الأعمدة في مجموعات
- تحديد الأذونات لكل عمود
- نسخ التكوين بين المشاريع

---

تم تطوير هذا النظام لجعل إدارة بيانات الطلبات أكثر مرونة وسهولة في الاستخدام.